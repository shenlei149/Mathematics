## The Basic Pigeon-Hole Principle
**Theorem 1.1.** [鸽巢原理] 把$n$个球放入$k$个盒子，如果$n>k$，那么至少有一个盒子里面至少有两个球。  
**Proof.**  
使用间接法（反证法）来这个定理。  
假设没有盒子至少有两个球，也就是说每个盒子有0个或者1个球。假设有$m$个盒子有0个球，显然$m\geq 0$，那么有$k-m$个盒子有1个球。进而球的总数是$k-m$，而它不等于$n$，因为$k-m\leq k<n$。出现了矛盾，假设不成立，所以至少有一个盒子里面至少有两个球。

**Example 1.2.** 在序列$7,77,777,\ldots$中有一个元素能被2003整除。  
**Solution.** 我们证明一个更强的命题，前2003个元素中有一个元素能被2003整除。反证法。假设都不能被2003整除，那么余数是1到2002的某数，由于有2003个余数，所以根据鸽巢原理，那么至少有两个数对应的余数相同。不妨设第$i$个和第$j$个数，$a_i,a_j$，具有相同余数，其中$i<j$。  
$$a_i=2003k_i+r$$
$$a_j=2003k_j+r$$
所以
$$a_j-a_i=2003(k_j-k_i)$$
那么$a_j-a_i$能够整除2003。  
另一方面$a_j-a_i$是由$j-i$个7和$i$个0组成的数。
$$a_j-a_i=a_{j-i}\cdot 10^i$$
由于$10^i$不能被2003整除，所以$a_{j-i}$能被2003整除。与假设矛盾。

**Example 1.3.** $n$个人参加单循环象棋比赛。证明任何时间点，有两个人的比赛场数相同。  
**Solution.** $n$个参赛者相当于鸽巢原理的球。比赛场数的可能性相当于抽屉。比赛场数从$0$到$n-1$，共有$n$种可能性。但是仔细考虑比赛规则，如果某个人比赛了$n-1$场的话，那么其他人至少比赛了1场，所以$0$和$n-1$这两种可能性不能同时存在，所以比赛场数有
$n-1$种可能性。根据鸽巢原理，至少有两个人的比赛场数是相同的。

## The Generalized Pigeon-Hole Principle
**Theorem 1.4** 将$n$个球放到$m$个盒子中，其中$n>rm$，那么至少有一个盒子里面至少有$r+1$个球。  
**Proof.** 反证法。命题的反面是每个盒子最多有$r$个球，那么球数最多是$rm$，小于$n$。矛盾。

**Example 1.5.** 十个点放到单位正方形中。有两点距离小于0.48，有三点能被半径0.5的圆覆盖。  
**Solution.** 对于第一个命题，如下图分成9个等大的小正方形。  
![](0101.png)  
那么至少有一个小正方形里面有两个点，这两点的距离最大是$\frac{\sqrt{2}}{3}<0.48$。  
第二个命题，如下图分成4个等大的三角形。  
![](0102.png)  
那么至少有一个三角形中包含三个点，而该三角形能被一个半径为0.5的圆覆盖。

**Example 1.6.** 在过去1000年中，读者的某个祖先A，存在一个人P，既是A的父亲的祖先，也是A的母亲的祖先。  
**Solution.** 从读者开始构成一棵家族树。前三代不会有重合。  
假设25年一代人（实际上要比这个值低，往较宽松的方向估计），共计40代人。节点数共计$1+2+\cdots+2^{40}=2^{41}-1$。  
如果有两个节点是同一个人B，那么该B就是我们要找的P。  
如果没有，那$2^{41}-1$是完全不同的人。但是目前地球上人数少于$10^{10}$，历史上任意时期都比这个值少的多，那么40代人共计$40\cdot10^{10}<2^{41}-1$，矛盾。那么一定有两个节点是同一个人。

**Example 1.7.** 史密斯夫妇邀请了4对夫妇到他家参加聚会。这8个人一些是史密斯先生的朋友，另一些是史密斯太太的朋友。如果两人在聚会前就认识，那么见面时会握手。事后，史密斯先生说：“如果排除我，其他人握手次数均不相同”。问，史密斯太太握了几次手。  
**Solution.** 我们使用图(`graph`)和鸽巢原理来解决这个问题。  
十个点代表十个人，除了史密斯先生外，标记握手次数。由于每个人不会和自己的配偶握手，也不可能和自己握手，所以握手的最大次数就是8。九个人握手次数各不相同，那么他们握手次数必须是0,1,2,3,4,5,6,7,8。  
![](0103.png)  
用$Y_i$来表示握手次数为$i$的人。那么谁是$Y_8$的配偶呢？$Y_8$除了自己的配偶外都握了手。$Y_0$握手次数，也就是说，$Y_8$没有和$Y_0$握手，所以$Y_8$和$Y_0$是一对。  
![](0104.png)  
$Y_7$没有和$Y_0$握手外，还没有和自己的配偶握手。而$Y_1$已经和$Y_8$握手了，所以他不会再和其他人握手。所以$Y_7$的配偶是$Y_1$。  
同理，$Y_6$和$Y_2$是一对，$Y_5$和$Y_3$是一对。那么$Y_4$是史密斯太太，她握了4次手。  
![](0105.png)

## Exercises
(4) 将200个球分到100个盒子中，每个盒子最少1个，最多100个。求证可以找到一些盒子，这些盒子共有100个球。  
**Solution.** 分两种情况。  
每个盒子包含的球数相同，那么任意50个盒子都是满足题意的。  
另一种情况，至少有两个盒子包含不同数量的球。不妨设为$a_1$和$a_2$，其他盒子的球的数量为$a_3,a_4,\cdots,a_{100}$。考虑下面这个数列
$$a_1,a_1+a_2,a_1+a_2+a_3,\cdots,a_1+a_2+\cdots+a_{100}$$
假设这100项有两项除以100的余数相同，那么这两项相减的值恰为100。也就是说$a_i + a_{i+1} + \cdots + a_j = 100$。  
如果除以100的余数均不同，我们把$a_2$放入数列中，由于$a_1\neq a_2$，所以这是一项新的值，此时，数列共有101相。那么一定有一项模100和$a_2$相同，假定是第$i$项，其和是$S$，那么$S-a_2=a_1+a_3+\cdots+a_i=100$。  
其实证明了一个更严格的命题，这些盒子是连续的或者基本是连续的。  
对于$2n$个盒子和$4n$个球而言，命题都是成立的。

