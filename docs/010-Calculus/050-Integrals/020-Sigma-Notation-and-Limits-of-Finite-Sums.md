### 有限和和西格玛符号
西格玛符号可以使用紧凑的形式表示许多项的和
$$\sum_{k=1}^n a_k=a_1+a_2+a_3+\cdots+a_{n-1}+a_n$$

例1

| 西格玛符号 | 展开形式 | 和 |
|--|--|--|
| $\sum_{k=1}^5k$ | $1+2+3+4+5$ | $15$ |
| $\sum_{k=1}^3(-1)^kk$ | $(-1)^1(1)+(-1)^2(2)+(-1)^3(3)$ | $-1+2-3=-2$ |
| $\sum_{k=1}^2\frac{k}{k+1}$ | $\frac{1}{1+1}+\frac{2}{2+1}$ | $\frac{1}{2}+\frac{2}{3}=\frac{7}{6}$ |
| $\sum_{k=4}^5\frac{k^2}{k-1}$ | $\frac{4^2}{3}+\frac{5^2}{4}$ | $\frac{16}{3}+\frac{25}{4}=\frac{12}{139}$ |

例2 用西格玛符号表示和式 $1+3+5+7+9$。  
解：这取决于下限的选择，不过最后的结果应该是一样的。一般地，选择 $k=0,k=1$。不过可以从任何正数开始。比如
$$k=0: 1+3+5+7+9=\sum_{k=0}^4(2k+1)$$
$$k=1: 1+3+5+7+9=\sum_{k=1}^5(2k-1)$$
$$k=2: 1+3+5+7+9=\sum_{k=2}^6(2k-3)$$
$$k=-3: 1+3+5+7+9=\sum_{k=-3}^1(2k+7)$$
当求下面和式时
$$\sum_{k=1}^3(k+k^2)$$
可以重新排列这些项
$$\begin{aligned}
\sum_{k=1}^3(k+k^2)&=(1+1^2)+(2+2^2)+(3+3^2)\\
&=(1+2+3)+(1^2+2^2+3^2)\\
&=\sum_{k=1}^3k+\sum_{k=1}^3k^2
\end{aligned}$$
一般地
$$\sum_{k=1}^n(a_k+b_k)=\sum_{k=1}^na_k+\sum_{k=1}^nb_k$$
这个式子和下面额外三个法则一样，使用数学归纳法证明即可。

有限和法则：
$$\sum_{k=1}^n(a_k+b_k)=\sum_{k=1}^na_k+\sum_{k=1}^nb_k$$
$$\sum_{k=1}^n(a_k-b_k)=\sum_{k=1}^na_k-\sum_{k=1}^nb_k$$
$$\sum_{k=1}^nca_k=c\sum_{k=1}^na_k$$
$$\sum_{k=1}^nc=cn$$

例3 运用上述法则
$$\sum_{k=1}^n(3k-k^2)=3\sum_{k=1}^nk-\sum_{k=1}^nk^2$$
$$\sum_{k=1}^n(-a_k)=-\sum_{k=1}^na_k$$
$$\sum_{k=1}^3(k+4)=\sum_{k=1}^3k+\sum_{k=1}^34=1+2+3+4\cdot 4=18$$
$$\sum_{k=1}^n\frac{1}{n}=\frac{1}{n}\cdot n=1$$

人们发现了很多很重要和式的公式。其中最重要的是前 $n$ 个整数和，及其前 $n$ 个整数的平方和和立方和。

例4 证明前 $n$ 个整数和是
$$\sum_{k=1}^nk=\frac{n(n+1)}{2}$$
证明：将这些项正向写一遍，逆向写一遍
$$\begin{aligned}
1&+&2&+&3&+\cdots&+&n\\
n&+&(n-1)&+&(n-2)&+\cdots&+&1
\end{aligned}$$
每一列的两项相加是 $n+1$，总共有 $n$ 项，所以和是 $n(n+1)/2$。

前 $n$ 个整数的平方和和立方和分别是
$$\sum_{k=1}^nk^2=\frac{n(n+1)(2n+1)}{6}$$
$$\sum_{k=1}^nk^3=(\frac{n(n+1)}{2})^2$$
使用数学归纳法证明这两个公式。

高德纳的《具体数学》对求和有详细讨论，有很多有趣的方法：https://guozi149.me/TeachMyselfComputerScience/#/TAOCP/ConcreteMathematics/02-Sums/

### 有限和的极限
5.1 节告诉我们有限和估算会随着子区间变多变窄而更精确。下面这个例子求子区间无限窄无限多的时候估算的极限。

例5 使用估算法求 $y=1-x^2$ 在区间 $[0,1]$ 上曲线和 $x$ 轴围成的面积的下和，求当宽度趋于零，子区间趋于无限多时的极限。  
解：切分成 $n$ 个子区间，每个子区间宽度是 $\Delta x=1/n$。我们要求 $n\to\infty$ 时的值。这 $n$ 个子区间分别是
$$[0,\frac{1}{n}],[\frac{1}{n},\frac{2}{n}],\cdots,[\frac{n-1}{n},\frac{n}{n}]$$
由于 $y=1-x^2$ 在 $[0,1]$ 是递减函数，所以每个区间的最小值是取右端点，那么区间 $[\frac{k-1}{n},\frac{k}{n}]$ 对应的高度是 $f(k/n)=1-(k/n)^2$，那么
$$\begin{aligned}
\sum_{k=1}^nf(k/n)\cdot \frac{1}{n}&=\sum_{k=1}^n(1-(\frac{k}{n})^2)\frac{1}{n}\\
&=\sum_{k=1}^n(\frac{1}{n}-\frac{k^2}{n^3})\\
&=\sum_{k=1}^n\frac{1}{n}-\sum_{k=1}^n\frac{k^2}{n^3}\\
&=n\cdot\frac{1}{n}-\frac{1}{n^3}\sum_{k=1}^nk^2\\
&=1-\frac{1}{n^3}\frac{n(n+1)(2n+1)}{6}\\
&=1-\frac{2n^3+3n^2+n}{6n^3}
\end{aligned}$$
这就是 $n$ 为任意值时的下和公式。当 $n\to\infty$ 时
$$\lim_{n\to\infty}(1-\frac{2n^3+3n^2+n}{6n^3})=1-\frac{2}{6}=\frac{2}{3}$$
下和估算收敛于 $2/3$，同样的方式可以得到上和也收敛于 $2/3$。任意有限和 $\sum_{k=1}^nf(c_k)(1/n)$ 的值介于上和与下和之间，所以都收敛于 $2/3$。据此，我们说区域 $R$ 的面积就是这个极限值。

### 黎曼和
